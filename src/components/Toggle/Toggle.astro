<label
  class="w-fit flex items-center justify-end cursor-pointer relative select-none rounded-md outline-current has-focus-visible:outline-offset-3 has-focus-visible:outline-2 has-focus-visible:outline-current"
  for="burger-toggle"
>
  <input type="checkbox" id="burger-toggle" class="sr-only" checked />
  <span class="sr-only">Show restaurants only in Minnesota</span>
  <span id="burger-toggle-label" class="mr-4" aria-hidden>Minnesota</span>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 100 100"
    width="40"
    height="40"
    aria-hidden="true"
  >
    <defs>
      <symbol>
        <path
          id="globe"
          d="M 2.7079557,44.612743 C 1.9187469,56.704487 3.955471,85.080685 38.24168,95.71172 34.092412,94.163693 29.084784,92.656008 24.935515,90.114838 c 0.38911,-2.587139 2.217818,-6.437649 1.173538,-9.403194 -1.0767,-2.136944 -3.038797,-1.262773 -4.902382,-3.005231 -1.863589,-1.74245 -4.492287,-4.304279 -5.584458,-7.804609 -1.092163,-3.50033 -1.287835,-9.930693 0.127887,-12.334876 1.415726,-2.404174 3.091647,-0.506802 3.921913,-2.108142 0.830262,-1.601341 0.731764,-4.215455 -0.596811,-6.279574 C 17.746627,47.115093 14.68128,46.122596 11.78557,45.187201 8.8898524,44.251805 2.7982247,44.062627 2.7982247,44.062627 6.6749697,22.855125 17.267109,8.8131654 41.324735,4.2340147 c 0.666754,-0.1269105 4.870236,4.3475364 4.921632,10.1977143 0.03946,4.490284 -2.345737,10.381067 -6.397256,12.220317 -0.147661,0.067 -1.009728,0.842906 -1.44128,1.183461 -1.782595,1.406719 -0.434174,4.721586 -0.583808,7.192049 -0.494806,1.61617 -3.386174,2.408606 -4.227333,1.408122 -0.9429,-1.121496 -0.843466,-3.486786 -2.720802,-4.642529 -2.559755,-1.575854 -6.49341,-2.910856 -12.22565,-1.235305 -0.496918,0.14525 -2.219621,2.048303 -2.215341,2.566843 -1.433511,4.313647 7.302986,13.36871 10.825152,14.888322 5.8263,2.51371 9.413687,-2.950285 12.192019,2.960369 1.712089,3.64231 5.704195,1.610465 8.270113,5.83103 1.533969,2.523173 9.296216,5.472835 9.612935,8.275585 0.08483,0.750583 -1.634426,3.509803 -3.391166,5.145308 -1.967767,1.831982 -1.152013,3.958971 -2.077314,4.331047 -1.929156,0.775745 -3.797976,1.189797 -5.051016,2.981339 -0.982578,1.404856 -0.749207,2.610073 -1.463229,4.41697 -1.933857,4.893833 -5.152973,10.267268 -7.03053,13.838441 54.002703,8.079592 64.722609,-42.752026 58.339594,-57.763561 0,0 -7.425516,-1.730922 -11.013712,-1.192895 -2.810597,0.421436 -5.746527,1.607787 -7.743923,3.73059 -1.816999,1.93107 -2.443371,4.833478 -3.154579,7.445777 -0.679586,2.496144 -1.48159,5.16356 -1.023108,7.7149 0.387719,2.157537 1.507554,4.284947 3.069323,5.741327 1.726042,1.609576 4.096216,2.576778 6.394413,2.780951 2.555612,0.227045 5.027942,-2.502243 7.50278,-1.794162 1.881881,0.538425 4.028481,4.036866 4.028481,4.036866 5.41801,-15.237105 6.80962,-34.706838 -15.239487,-52.927824 0,0 -1.104198,3.766767 -2.600931,4.844239 -1.481211,1.066307 -3.719734,0.154608 -5.28605,1.0765 -0.807525,0.475282 -1.429482,1.300121 -1.875695,2.152995 -0.681551,1.302702 -1.012217,2.822396 -1.108363,4.305993 -0.06043,0.932504 -0.178666,2.022932 0.341036,2.780956 1.033662,1.507677 3.037193,2.083706 4.774493,2.422118 1.0095,0.196642 2.124105,0.152516 3.069323,-0.269123 1.390704,-0.620365 2.478081,-1.889256 3.410349,-3.139784 0.533468,-0.715579 0.424057,-2.008067 1.19363,-2.422124 2.071941,-1.114769 4.593955,0.797991 6.905968,1.076501 1.048128,0.12626 3.154572,0.269123 3.154572,0.269123 C 76.473778,4.2672683 58.765704,2.6095158 42.632281,4.0030662 20.823745,7.6379467 6.3765339,19.663411 2.7079557,44.612743 Z"
        ></path>
      </symbol>
      <symbol>
        <path
          id="minnesota"
          d="m 16.889926,99.425872 0.0029,-28.901093 C 15.27039,68.886513 14.02128,67.58821 12.463282,65.545418 c 0.0717,-0.493827 0.04827,-0.710857 0.408543,-1.361056 0.704432,-2.051931 1.887768,-4.595721 2.815654,-6.590914 -0.07485,-4.157141 -1.495057,-8.234905 -2.778878,-12.205283 l 0.236551,-1.761588 c 0.09416,-0.171926 0.108018,-0.208119 0.200452,-0.382244 -0.353707,-3.814876 -0.710349,-7.62957 -1.065997,-11.444294 -0.803368,-3.046249 -2.265826,-6.595618 -3.3450833,-9.691617 l 0.00956,-0.03843 c 0,-1.713644 -0.1002928,-4.318541 -0.1002928,-6.098559 L 8.7865274,15.608592 C 8.9617798,14.954522 9.1856731,13.701598 9.4030848,13.03161 9.393144,12.887868 7.7801167,7.9831316 7.9071967,7.2402498 15.914872,7.2450245 23.922644,7.279445 31.93032,7.2717015 31.9722,2.9145866 31.90996,6.7925774 31.93512,0.44468567 c 0.04369,0.003824 2.610011,0.80268913 3.902024,1.12612033 0.537172,2.9404974 1.241576,9.354745 1.484838,9.627144 4.343874,2.865185 9.272711,2.004075 9.881324,2.647354 0.564647,0.628545 -0.03595,1.431636 0.461466,1.905645 l 0.113409,0.0095 c 1.457888,-0.03394 2.257575,-0.14248 3.67123,-0.52743 0.376517,-0.340419 0.744584,-0.692272 1.115298,-1.039593 0,0 7.391309,0.836072 8.522181,1.088386 0.0283,0.145857 0.06596,0.289112 0.106397,0.431478 l 0.0019,0.01118 -1.007242,0.952531 c 0.48853,0.666566 1.303504,0.463121 2.029895,0.267219 l 0.935381,0.812326 c -0.326117,0.589512 0.590641,2.495913 1.009442,3.14788 0.543567,-0.442041 0.789764,-0.290048 1.150976,-0.486179 l -0.222861,-1.648589 2.908634,0.170807 0.07926,0.128122 0.35582,0.07782 3.301356,2.125284 0.05105,0.09082 0.121983,1.07702 1.628791,0.408745 0.07304,0.09111 c -0.266052,0.172709 -0.285592,0.498913 -0.232124,0.792153 l 0.06672,0.235041 6.833095,-3.047894 1.616344,-0.107191 1.108903,2.273884 c 0,0 13.220336,1.681122 14.496088,1.386486 0.0086,0.08939 -0.605344,0.375198 -0.605344,0.375198 0,0 -9.72371,4.127772 -13.825871,6.351256 0,0 -15.689405,14.309795 -18.004234,16.274913 -0.0057,3.316288 -0.0261,6.642614 -0.03173,9.961513 -0.259734,0.112855 -1.797054,1.912824 -3.570324,2.225902 -0.834773,0.712692 -1.854892,3.034739 -2.702446,3.456094 -0.561004,0.340217 -0.772632,1.660863 -0.548261,2.367982 -0.111928,1.050185 0.580286,-0.274303 1.819635,0.805518 -0.05459,1.031057 0.864981,1.034355 0.886854,2.058719 0.08097,0.09798 -0.208874,3.616863 -1.789292,10.950937 0.455368,0.876137 8.314013,5.806647 9.207761,5.992167 0.869388,0.344501 0.92868,1.237092 1.397909,2.029752 0.572869,2.284592 3.194236,3.269875 5.177605,4.074668 1.0818,0.88767 1.576105,2.605818 2.094731,3.628442 -0.212345,1.697765 0.305449,2.895279 0.484678,4.399293 -20.200206,-0.01223 -40.401501,-9.56e-4 -60.602061,0.0019 z"
        ></path>
      </symbol>
    </defs>
    <path
      id="target"
      stroke-width="3"
      fill="transparent"
      class="stroke-gray-200"
      d="m 16.889926,99.425872 0.0029,-28.901093 C 15.27039,68.886513 14.02128,67.58821 12.463282,65.545418 c 0.0717,-0.493827 0.04827,-0.710857 0.408543,-1.361056 0.704432,-2.051931 1.887768,-4.595721 2.815654,-6.590914 -0.07485,-4.157141 -1.495057,-8.234905 -2.778878,-12.205283 l 0.236551,-1.761588 c 0.09416,-0.171926 0.108018,-0.208119 0.200452,-0.382244 -0.353707,-3.814876 -0.710349,-7.62957 -1.065997,-11.444294 -0.803368,-3.046249 -2.265826,-6.595618 -3.3450833,-9.691617 l 0.00956,-0.03843 c 0,-1.713644 -0.1002928,-4.318541 -0.1002928,-6.098559 L 8.7865274,15.608592 C 8.9617798,14.954522 9.1856731,13.701598 9.4030848,13.03161 9.393144,12.887868 7.7801167,7.9831316 7.9071967,7.2402498 15.914872,7.2450245 23.922644,7.279445 31.93032,7.2717015 31.9722,2.9145866 31.90996,6.7925774 31.93512,0.44468567 c 0.04369,0.003824 2.610011,0.80268913 3.902024,1.12612033 0.537172,2.9404974 1.241576,9.354745 1.484838,9.627144 4.343874,2.865185 9.272711,2.004075 9.881324,2.647354 0.564647,0.628545 -0.03595,1.431636 0.461466,1.905645 l 0.113409,0.0095 c 1.457888,-0.03394 2.257575,-0.14248 3.67123,-0.52743 0.376517,-0.340419 0.744584,-0.692272 1.115298,-1.039593 0,0 7.391309,0.836072 8.522181,1.088386 0.0283,0.145857 0.06596,0.289112 0.106397,0.431478 l 0.0019,0.01118 -1.007242,0.952531 c 0.48853,0.666566 1.303504,0.463121 2.029895,0.267219 l 0.935381,0.812326 c -0.326117,0.589512 0.590641,2.495913 1.009442,3.14788 0.543567,-0.442041 0.789764,-0.290048 1.150976,-0.486179 l -0.222861,-1.648589 2.908634,0.170807 0.07926,0.128122 0.35582,0.07782 3.301356,2.125284 0.05105,0.09082 0.121983,1.07702 1.628791,0.408745 0.07304,0.09111 c -0.266052,0.172709 -0.285592,0.498913 -0.232124,0.792153 l 0.06672,0.235041 6.833095,-3.047894 1.616344,-0.107191 1.108903,2.273884 c 0,0 13.220336,1.681122 14.496088,1.386486 0.0086,0.08939 -0.605344,0.375198 -0.605344,0.375198 0,0 -9.72371,4.127772 -13.825871,6.351256 0,0 -15.689405,14.309795 -18.004234,16.274913 -0.0057,3.316288 -0.0261,6.642614 -0.03173,9.961513 -0.259734,0.112855 -1.797054,1.912824 -3.570324,2.225902 -0.834773,0.712692 -1.854892,3.034739 -2.702446,3.456094 -0.561004,0.340217 -0.772632,1.660863 -0.548261,2.367982 -0.111928,1.050185 0.580286,-0.274303 1.819635,0.805518 -0.05459,1.031057 0.864981,1.034355 0.886854,2.058719 0.08097,0.09798 -0.208874,3.616863 -1.789292,10.950937 0.455368,0.876137 8.314013,5.806647 9.207761,5.992167 0.869388,0.344501 0.92868,1.237092 1.397909,2.029752 0.572869,2.284592 3.194236,3.269875 5.177605,4.074668 1.0818,0.88767 1.576105,2.605818 2.094731,3.628442 -0.212345,1.697765 0.305449,2.895279 0.484678,4.399293 -20.200206,-0.01223 -40.401501,-9.56e-4 -60.602061,0.0019 z"
    ></path>
  </svg>
</label>

<script>
  import { interpolate } from "flubber";

  import { animate } from "motion";

  const checkbox = document.getElementById("burger-toggle");
  const label = document.getElementById("burger-toggle-label")!;
  const globe = document.getElementById("globe");
  const minnesota = document.getElementById("minnesota");

  const globePath = globe?.getAttribute("d");
  const minnesotaPath = minnesota?.getAttribute("d");

  if (!globePath || !minnesotaPath) {
    throw new Error("Missing path data");
  }

  const mnToGlobe = interpolate(minnesotaPath, globePath, {
    maxSegmentLength: 1,
  });

  const globeToMn = interpolate(globePath, minnesotaPath, {
    maxSegmentLength: 1,
  });

  checkbox?.addEventListener("change", (e) => {
    // Check if the checkbox is checked
    const isChecked = (e.target as HTMLInputElement).checked;

    if (isChecked) {
      label.innerText = "Minnesota";
    } else {
      label.innerText = "All Burgers";
    }

    const target = document.getElementById("target");

    let interpolater = isChecked ? globeToMn : mnToGlobe;

    animate(0, 1, {
      duration: 0.7,
      onUpdate: (progress) => {
        target?.setAttribute("d", interpolater(progress));
      },
    });
  });
</script>
